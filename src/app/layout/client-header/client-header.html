<nav class="bg-white shadow-lg">
  <div class="w-full px-4 py-2 flex justify-between items-center relative bg-[#5d4037] dark:bg-black text-white">
    <a class="text-xl flex items-center gap-2  font-bold hover:text-gray-800" routerLink="/">
      <img class="w-20" src="assets/img/Andes_Cafe.png" alt="">
      EcoAndes Café</a>

    <button class="md:hidden  hover:text-gray-700 focus:outline-none" (click)="toggleNavbar()" aria-controls="navbarNav"
      aria-expanded="false" aria-label="Toggle navigation">
      @if(!isOpen()){
      <div class='w-auto rounded-full border border-amber-600 px-2 text-xl font-bold text-red-400'>
        X
      </div>
      }@else{
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
      </svg>
      }
    </button>

    <div
      [class]='"absolute mt-2.5 md:mt-0 text-white bg-[#5d4037] w-full left-0 top-[50px] md:static md:w-auto md:bg-transparent md:opacity-100 md:max-h-full transition-all duration-500 ease-in-out z-50 " + (!isOpen() ? "max-h-96 opacity-100" : "max-h-0 opacity-0")'
      id="navbarNav">

      <ul class="md:flex md:space-x-4 p-1 px-4 md:p-0 md:ml-auto md:items-center">
        <li>
          <a class="block py-0.5 hover:text-gray-600  cursor-pointer transition duration-300  border-b-2 border-b-amber-800/50 md:border-none"
            routerLink="/" routerLinkActive="font-bold text-green-400 border-y-2 border-green-400 "
            [routerLinkActiveOptions]="{ exact: true }"><i class="bi bi-house mr-1"></i>Inicio</a>
        </li>
        <li>
          <a class="block py-0.5 hover:text-gray-600  cursor-pointer transition duration-300 border-b-2 border-b-amber-800/50 md:border-none"
            routerLink="/productos"
            routerLinkActive="font-bold text-green-400 border-y-2 border-green-400"><i class="bi bi-cup-hot mr-1"></i>Productos</a>
        </li>
        <li>
          <a class="block py-0.5  hover:text-gray-600  cursor-pointer transition duration-300 border-b-2 border-b-amber-800/50 md:border-none"
            routerLink="/nosotros" routerLinkActive="font-bold text-green-400 border-y-2 border-green-400"><i class="bi bi-people-fill mr-1"></i>Nosotros</a>
        </li>
        <li>
          <a class="block py-0.5  hover:text-gray-600  cursor-pointer transition duration-300 border-b-2 border-b-amber-800/50 md:border-none"
            routerLink="/contacto" routerLinkActive="font-bold text-green-400 border-y-2 border-green-400"><i class="bi bi-globe mr-1"></i>Contacto</a>
        </li>
        <li>
          <button type="button" class="block py-0.5 px-1  hover:bg-gray-400/50 rounded-2xl cursor-pointer transition duration-300 " (click)="sessionService.cambiarTema()">
            @if (sessionService.isDark$()) {
              <i class="bi bi-sun"></i>
            }@else {
              <i class="bi bi-moon-stars-fill"></i>
            }

          </button>
        </li>

        <div class="group relative" *appHasAuth="false">
          <button class="block px-2 py-1  hover:text-gray-400  cursor-pointer transition duration-300">

            <svg class="w-6 h-6 inline-block" fill="currentColor" viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd">
              </path>
            </svg>
            Ingresar
            <svg class="w-4 h-4 inline-block transform transition-transform group-hover:rotate-180" fill="currentColor"
              viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"></path>
            </svg>
          </button>
          <div
            class="absolute w-full md:w-64 rounded-md  top-12 max-h-0 group-hover:max-h-[500px] flex flex-col bg-amber-50 overflow-hidden transition-all duration-400 ease-in-out text-amber-900">
            <a class="p-2 hover:bg-amber-400/50 transition-all duration-400 ease-in-out" routerLink="/login">
              <i class="bi bi-people mr-1"></i>Iniciar Sesion</a>
            <a class="p-2 hover:bg-amber-400/50" routerLink="/register"><i class="bi bi-person-add mr-1"></i>Registrarse</a>
          </div>
        </div>


        <div class="group relative bg-amber-700/10" *appHasAuth="true">
          <button class="flex justify-center items-center px-2 py-1  hover:text-gray-400/80  cursor-pointer transition duration-300"
            >
            <svg class="w-6 h-6 inline-block" fill="currentColor" viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd">
              </path>
            </svg>
            <span class="w-3 h-3 rounded-full mx-2 bg-green-400"></span>
            <span class="mr-2">{{ authService.currentUserAuth$()?.username | titlecase }}</span>
            <div class="px-0.5 border border-gray-300/30 h-6 flex justify-center items-center rounded-sm cursor-pointer hover:border-gray-500 ">
              <i class="bi bi-caret-down-fill transform duration-300 transition-transform group-hover:rotate-90"></i>
            </div>
          </button>
          <div
            class="absolute min-w-40 w-full overflow-hidden right-0 bg-amber-50 flex flex-col items-start rounded-md shadow-lg  z-50 top-10 max-h-0 group-hover:max-h-[500px] transition-all duration-400 ease-in-out">
            <a class="p-2 font-medium text-sm text-green-700 hover:bg-gray-100 cursor-pointer" routerLink="/admin"><i
                class="bi bi-ui-checks-grid mr-2"></i> <span>Panel de Control</span></a>
            <button type="button" class="p-2 text-sm font-medium text-red-700 hover:bg-gray-100 cursor-pointer"
              (click)="cerrarSesion()"><i class="fas fa-sign-out-alt mr-2"></i><span>Cerrar sesión</span> </button>

          </div>
        </div>
      </ul>
    </div>
  </div>
</nav>
